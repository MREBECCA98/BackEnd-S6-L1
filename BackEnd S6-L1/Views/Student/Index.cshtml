@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}
<h1 class="my-3">Aggiungi studente</h1>

<button id="addStudent">Aggiungi studente  </button>

<div class="modal" id="createStudentModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Modal title</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" id="createStudentModalBody">
                <p>Modal body text goes here.</p>
            </div>

        </div>
    </div>
</div>



@section Scripts {
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const addStudent = document.getElementById("addStudent");
            if (!addStudent) return;

            addStudent.addEventListener("click", async () => {
                const res = await fetch("/Student/Index", { method: "GET" });

                if (!res.ok) {
                    alert("Errore nel caricamento del modulo");
                    return;
                }

                const data = await res.text();
                if (!data) return;

                const createStudentModalBody = document.getElementById("createStudentModalBody");
                if (!createStudentModalBody) return;

                createStudentModalBody.innerHTML = data;

                const createStudentModalElement = document.getElementById("createStudentModal");
                if (!createStudentModalElement) return;

                const modal = bootstrap.Modal.getOrCreateInstance(createStudentModalElement);
                modal.show();
            });
        });
    </script>
}
